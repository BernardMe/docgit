

## 应该如何提问

### 先要尝试自己解决
- 帮助文档
- 示例

### 提问的智慧
- 问题详尽
- 贴图

### Linux与Windows的不同
- (字符界面)Linux严格区分大小写
- Linux中所有内容以文件形式保存，包括硬件(一切内容皆文件)
- Linux不靠扩展名区分文件类型，靠权限来区分
	+ 但是有一些约定俗成的扩展名
	+ 压缩包 *.gz  *.tar.gz
	+ 二进制软件包 *.rpm
	+ 网页文件 *.html .php
	+ 脚本文件 *.sh
- Windows下的程序不能直接在Linux中安装和运行
	+ 好：Win的木马和病毒不能执行
	+ 坏：针对Win的软件所有程序要重新开放




## 系统分区

### Manjaro分區表

存儲器:	ATA TOSHIBA MQ01ABD1 - 931.5 GiB(/dev/sdb)

分區名稱	文件系統	挂載點點	大小
新建分區	FAT32		/boot/efi	500 MiB
新建分區	ext4		/		50 GiB
新建分區	ext4		/home		400 GiB
新建分區	臨時存儲空間			4 GiB

空閒空間	未知				477 GiB

install boot loader on:	主引導記錄	ATA TOSHIBA MQ01ABD1(/dev/sdb)



### 分区类型
>把大硬盘分为小的逻辑分区

- 主分区：最多只能有4个(硬盘结构决定的)
- 扩展分区
	+ 最多只能有1个
	+ 主分区加扩展分区最多有4个
	+ 不能写入数据，只能包含逻辑分区
- 逻辑分区

### 格式化
>为了写入文件系统，在分区中划出一片用于存放文件分配表，目录表等用于文件管理的磁盘空间。

为了查找/读取文件更快捷，将空间分成数据块(block, 默认4KB)

### Linux格式化
- 把整个分区分成等大小的数据块
- 在分区列表中建立一个二维表格(i节点，权限，修改时间等)

### 硬件设备文件名
`/`代表根目录 `/dev`专门用来存放硬件设备文件名
硬件 | 设备文件名
- | -
IDE硬盘 | /dev/hd[a-d]

### 分区设备文件名
>给每个分区define设备文件名

- 设备文件名
	+ /dev/hda1(IDE硬盘接口) `a`代表第一块硬盘 `1`代表1分区
	+ /dev/sda1(SCSI硬盘接口，SATA硬盘接口)
- 分区表示
	+ 即使只有一个主分区，扩展分区中的多个逻辑分区一定从分区号5开始

### 挂载(分配的'盘符'称为'挂载点')
>给每个分区分配挂载点，把'挂载点'和分区连接起来

挂载是过程，就是给分区分配'盘符'的过程, 用目录作为'盘符'
- 必须分区
	+ /(根分区)
	+ swap分区(交换分区，内存2倍，4G内存以上和内存一样大小即可)
- 推荐分区
	+ /boot(启动分区，200MB)



### 家目录
- 超级管理员家目录 /root (/下的一级目录)
- 普通用户家目录 /home/user1/ (/home/下的二级目录)
`pwd`(Print Working Directory)显示当前目录







## Linux下创建shell脚本文件

1 touch 位置/文件名
2.编写脚本内容
（注：第一行一定要写这句：#!/bin/sh  一般是用这个（Bourne Again Shell））
3.chmod o+x /etc/init.d/redis.sh(变为执行文件)  


## Linux权限rwx转数字的一个小tips

从最简单的说起
-代表无权限，用数字表示是 0
r代表读权限，用数字表示是4
w代表写权限，用数字表示是2
x代表执行权限,用数字表示是1

老师讲的转换方式
以前在兄弟连培训的时候，李超老师讲过，一个方法

就是把要给的权限先转换成数字，然后加起来

比如777权限，7=1+2+4，其中1、2、4分别代表执行、读、写。

三个7中，第一个7代表文件所属用户对该文件的权限为7(所有权限)
第二个7代表文件所属用户组对该文件的权限为7
第三个7代表其他用户组对该文件的权限为7
（ps:也就是说任何一个人对该文件都有读写执行权限，所以说嘛～不要随便设置777权限）

自己get到的一个转换方式
假设我们要给一个文件如下权限（所属用户拥有rwx，同用户组和其他用户拥有读和执行）：

-rwxr-xr-x

第一个-代表这是一个文件，如果是目录则会显示d

我们把后面权限的部分拿出来，用二进制来表示，如果有权限用1表示，反之为0

那么这个文件权限转换成了

111 101 101

然后把每个三位数转换成10进制，分别为：

7 5 5

看到755 是不是就明白啦～～



## linux各文件夹的作用
linux下的文件结构，看看每个文件夹都是干吗用的
/bin 二进制可执行命令 
/dev 设备特殊文件 
/etc 系统管理和配置文件 
/etc/rc.d 启动的配置文件和脚本 
/home 用户主目录的基点，比如用户user的主目录就是/home/user，可以用~user表示 
/lib 标准程序设计库，又叫动态链接共享库，作用类似windows里的.dll文件 
/media/	可移除媒体(如CD-ROM)的挂载点(在FHS-2.3中出现)
/mnt 临时挂载的文件系统。 
/sbin 系统管理命令，这里存放的是系统管理员使用的管理程序 
/tmp 公用的临时文件存储点 
/root 系统管理员的主目录（呵呵，特权阶级） 
/lost+found 这个目录平时是空的，系统非正常关机而留下“无家可归”的文件（windows下叫什么.chk）就在这里 
/proc 虚拟的目录，是系统内存的映射。可直接访问这个目录来获取系统信息。 
/root/ 超级用户的家目录
/usr 最庞大的目录，要用到的应用程序和文件几乎都在这个目录。其中包含： 
- /usr/bin 众多的应用程序 
- /usr/include linux下开发和编译应用程序所需要的头文件 
- /usr/lib 常用的动态链接库和软件包的配置文件 
- /usr/local/bin 本地增加的命令 
- /usr/local/lib 本地增加的库
- /usr/sbin 超级用户的一些管理程序 
- /usr/doc linux文档 
- /usr/man 帮助文档 
- /usr/src 源代码，linux内核的源代码就放在/usr/src/linux里 
- /usr/x11r6 存放x window的目录 
/var 某些大文件的溢出区，比方说各种服务的日志文件 
- /var/cache 应用程序缓存数据。这些数据是在本地生成的一个耗时的I/O或计算结果。
- /var/lib 状态信息。由程序在运行时维护的持久性数据。
- /var/lock 锁文件，一类跟踪当前使用中资源的文件
- /var/log 日志文件，包含大量日志文件
- /var/mail 用户的电子邮箱。
- /var/run 自最后一次启动以来运行中的系统的信息，
- /var/spool 等待处理的任务的脱机文件，
- /var/tmp 在系统重启过程中可以保留的临时文件




## Linux常用命令

命令 [选项] [参数]

### clear
控制台下清屏命令

### less
less [参数] 文件..
使用less可以随意浏览文件
-N 显式每行的行号

### nl
nl [-bnw] 文件
小文本文件的查看

### vim
vim 文件

若用户就是
不想保存被修改后的文件而要强行退出vim时，可使用命令
`:q!`
vim放弃所作修改而直接退到shell下
`/xxx`,回车，按n向下一个，按N向上一个


### ls
ls [选项] [文件或目录]
选项:
-a 显示所有文件，包括隐藏文件 .开头是隐藏文件
-l 显示详细信息		
- `-rw-r--r--`
	+ `-`文件类型(-文件 d目录 l软链接文件 b块设备文件 c字符设备文件 s套接字文件 p管道文件)
	+ `rw-`u所有者 `r--`g所属组 `r--`o其他人
	+ r读 w写 x执行
-d 查看目录属性
-h 人性化显示文件大小
-i 显示inode

### 文件名颜色的含义

1）默认色代表普通文件。例：install.log

2）绿色代表可执行文件。例：rc.news

3）红色代表tar包 文件。 例：vim-7.1.tar.bz2

4）蓝色代表目录文件。  例：aa

5）水红代表图象文件。  例：Sunset.jpg

6）青色代表链接文件。  例：rc4.d     （此类文件相当于快捷方式）

7）黄色代表设备文件。  例：fd0


### cd切换所在目录
cd [目录]
cd ~ 进入当前用户的家目录
cd   进入当前用户的家目录
cd - 进入上次目录
cd .. 进入上一级目录
cd . 进入当前目录

#### 相对路径
参照当前所在目录，进行查找
如：`cd ../usr/local/src/`

#### 绝对路径
从根目录开始指定，一级一级递归查找。在任何目录下，都能进入指定位置
如：`cd /etc/`








 

## ArchLinux

格式化文件系统并使用swap
仅仅分区是不够的，还需要 mkfs 将分区格式化为指定的文件系统。
先查看所有分区：
`# lsblk /dev/sdx`
如果新创建了 UEFI 系统分区，需要格式化成 fat32 或 vfat32 文件系统，否则无法启动。Windows 双启动系统不要再格式化。
`# mkfs.vfat -F32 /dev/sdxY`
建议用 ext4 文件系统格式化其它分区：
`# mkfs.ext4 /dev/sdxY`
若您分了一个 swap 区，也不要忘了格式化并启用它：
`# mkswap /dev/sdaX`
`# swapon /dev/sdaX`
先挂载 / (root) 分区，其它目录都要在 / 分区中创建然后再挂载。在安装环境中用 /mnt 目录挂载 root：
`# mount /dev/sdxR /mnt`
然后挂载其余单独分区(除了 Swap)，比如 /boot，/var。先创建目录，然后挂载分区：
`# mkdir /mnt/home`
`# mount /dev/sda2 /mnt/home`
建议将 EFI 系统分区挂载到 /mnt/boot，其它方式参阅EFISTUB。
`# mkdir -p /mnt/boot`
`# mount /dev/sdXY /mnt/boot`
挂载好设备，就可以安装 Arch 了.

### Arch Linux更新密钥环
we need to update the archlinux-keyring package.

To do so, run:

`sudo pacman -S archlinux-keyring`




## Linux系统知识整理

`一切皆文件`


### 用户态和内核态
我们知道Linux系统有用户空间(用户态)和内核空间(内核态)之分，对于x86处理器以及大多数其它处理器，用户空间和内核空间之前的切换是比较耗时(涉及到上下文的保存和恢复，一般3种情况下会发生用户态到内核态的切换：发生系统调用时、产生异常时、中断时)。
